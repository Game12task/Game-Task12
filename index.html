<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ù‡Ø§Ù… Ù„ÙƒØ³Ø¨ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±Ø§Øª - GameTask</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #121212; color: #E0E0E0; margin:0; padding:0; text-align:center;}
        .container { max-width:600px; margin:50px auto; padding:20px; background-color:#1E1E1E; border-radius:15px; box-shadow:0 4px 25px rgba(0,0,0,0.7);}
        h1 { color:#64ffda; font-size:26px; margin-bottom:30px; border-bottom:2px solid rgba(100,255,218,0.2); padding-bottom:10px;}
        .user-input { background-color:#2C2C2C; padding:20px; border-radius:10px; margin-bottom:25px; text-align:right; border:1px solid #64ffda;}
        .user-input label { color:#E0E0E0; display:block; margin-bottom:8px; font-size:14px;}
        .user-input input { width:100%; padding:12px; border-radius:8px; border:none; background-color:#3A3A3A; color:#FFFFFF; box-sizing:border-box; text-align:right; font-size:16px;}
        .offer-section { background-color:#2C2C2C; padding:15px 0; border-radius:10px; margin-bottom:25px; border:1px solid #3A3A3A; overflow:hidden;}
        .offer-header { color:#FFD700; font-size:20px; margin-bottom:15px; text-align:center; padding-bottom:10px; border-bottom:1px solid rgba(255,215,0,0.2);}
        #cpa-offer-wall-container { min-height:500px;}
    </style>
</head>
<body>

<div class="container">
    <h1>Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ù‡Ø§Ù… Ù„ÙƒØ³Ø¨ Ø§Ù„Ù…Ø§Ù„ (Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±)</h1>

    <div class="user-input">
        <label for="username-input">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·):</label>
        <input type="text" id="username-input" placeholder="Ù…Ø«Ø§Ù„: Ahmad123">
    </div>

    <div class="offer-section">
        <div class="offer-header">ğŸ‘‘ GAME TASK ğŸ‘‘ | Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</div> 
        <div id="cpa-offer-wall-container">
            <p style="text-align:center; color:#ffeb3b; padding:20px;">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¹Ø±Ø¶ Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨.</p>
        </div>
    </div>
</div>

<script>
    const usernameInput = document.getElementById('username-input');
    const cpaContainer = document.getElementById('cpa-offer-wall-container'); 

    // Ø±Ø§Ø¨Ø· Ø¬Ø¯Ø§Ø± CPX Research Ù…Ø¹ Ù…ØªØºÙŠØ±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
    const CPA_OFFERWALL_BASE_URL = 'https://offers.cpx-research.com/index.php?app_id=29908&ext_user_id={USER_ID}&secure_hash=abcde12345&username={USER_NAME}&email=test@example.com';

    function updateOfferwall(userID, username) {
        if (cpaContainer) {
            const offerwallSrc = CPA_OFFERWALL_BASE_URL
                                    .replace('{USER_ID}', userID)
                                    .replace('{USER_NAME}', encodeURIComponent(username));
            const iframeCode = `
                <iframe 
                    sandbox='allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-popups-to-escape-sandbox' 
                    src='${offerwallSrc}' 
                    style='width:100%; height:2000px; border:none; display:block;' 
                    frameborder='0'>
                </iframe>
            `;
            cpaContainer.innerHTML = iframeCode;
        }
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø®Ø²Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹
    let currentUserID = localStorage.getItem('userID');
    let currentUsername = localStorage.getItem('username');
    if(currentUserID && currentUsername){
        usernameInput.value = currentUsername;
        usernameInput.disabled = true;
        updateOfferwall(currentUserID, currentUsername);
    }

    // Ø¹Ù†Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
    usernameInput.addEventListener('change', () => {
        const newUsername = usernameInput.value.trim();
        if(newUsername){
            const tempID = Math.floor(Math.random() * 100000); // Ø±Ù‚Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            localStorage.setItem('userID', tempID);
            localStorage.setItem('username', newUsername);
            usernameInput.disabled = true;
            updateOfferwall(tempID, newUsername);
        }
    });
</script>

</body>
</html>
